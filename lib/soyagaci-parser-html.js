var soyagaciParser=function(e){var r={};function t(n){if(r[n])return r[n].exports;var a=r[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=7)}([function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});const n=t(2),a=t(1);var o;!function(e){e.Order="Sıra",e.Gender="C",e.Relation="Yakınlık Derecesi",e.Name="Adı",e.LastName="Soyadı",e.FathersName="Baba Adı",e.MothersName="Ana Adı",e.BirthPlaceAndDate="Doğum Yeri ve Tarihi",e.BirthAddress="İl-İlçe-Mahalle/Köy",e.CitHaneSiraNo="Cilt-Hane-Birey Sıra No",e.MarriageStatus="Medeni Hali",e.DeathStatus="Durumu"}(o=r.HeaderColumn||(r.HeaderColumn={})),r.findHeaderColumn=function(e){return Object.keys(o).map(e=>o[e]).find(r=>r===e)};function i(e){return parseInt(e,10)}function s(e){switch(e){case"E":return n.Gender.Male;case"K":return n.Gender.Female;default:throw new Error("invalid gender for the row")}}function u(e){if(!e||e.constructor!==String)throw new Error("invalid input");const r=e.replace(/[^ABK]+/g,"");if(r.length<=0)throw new Error("invalid relation between user and ancestor");return r}function c(e){if(!e||e.constructor!==String)return;const r=e.trim();return r&&"-"!==r?r:void 0}function l(e){if(!e||e.constructor!==String)throw new Error("invalid input");const r=e.split("\n");if(2!==r.length)throw new Error("birthplace and date is invalid. should have 2 lines.");let t=a.parseTurkishDate(r[1].trim());if(!(t=!t||isNaN(t.getTime())?void 0:t))throw new Error("ancestor record without birthYear is unacceptable");return[r[0].trim(),t]}function d(e){if(!e||e.constructor!==String)throw new Error("invalid input as death status");const r=e.split("\n");if(r.length<2)throw new Error("not enough lines to parse death status");if("Ölüm"!==r[0].trim())return[n.DeathStatus.Alive,void 0];let t=a.parseTurkishDate(r[1].trim());return t=!t||isNaN(t.getTime())?void 0:t,[n.DeathStatus.Dead,t]}function h(e){if(!e||e.constructor!==String)throw new Error("invalid input");const r=e.trim().match(/^([0-9]+)-([0-9]+)-([0-9]+)$/);if(!r||4!==r.length)throw new Error("invalid cilt hane sira no tri");return[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10)]}function f(e){const r=c(e);if(!r)return r;const t=r.replace(/(?:\r\n|\r|\n)/g,"").trim();return t||void 0}r.RecordParseResult=class{constructor(e,r){this.records=e,this.errors=r}},r.parseOrder=i,r.parseGender=s,r.parseRelation=u,r.trimSpacesAndDash=c,r.parseBirthPlaceAndDate=l,r.parseDeathStatus=d,r.parseCiltHaneSiraNo=h,r.parseBirthAddress=f;const p={[o.Order]:i,[o.Gender]:s,[o.Relation]:u,[o.Name]:c,[o.LastName]:c,[o.FathersName]:c,[o.MothersName]:c,[o.MarriageStatus]:c,[o.BirthAddress]:f,[o.BirthPlaceAndDate]:l,[o.DeathStatus]:d,[o.CitHaneSiraNo]:h},m={[o.Order]:"order",[o.Gender]:"gender",[o.Relation]:"relation",[o.Name]:"name",[o.LastName]:"lastName",[o.FathersName]:"fathersName",[o.MothersName]:"mothersName",[o.MarriageStatus]:"marriageStatus",[o.BirthAddress]:"birthNeighbourhood",[o.BirthPlaceAndDate]:"birthPlaceAndDate",[o.DeathStatus]:"status",[o.CitHaneSiraNo]:"ciltHaneSiraNo"};function w(e,r){const t=e.reduce((e,t)=>{const n=p[t],a=m[t];if(!n||!a)throw new Error(`could not found parse or field for column ${t}`);const o=n(r(t));return o&&(e[a]=o),e},{}),n=t.relation;delete t.relation;const[a,o]=t.birthPlaceAndDate,[i,s,u]=t.ciltHaneSiraNo,[c,l]=t.status;return{relation:n,record:["order","gender","name","lastName","fathersName","mothersName","marriageStatus","birthNeighbourhood","dateOfDeath"].reduce((e,r)=>(t[r]&&(e[r]=t[r]),e),{birthPlace:a,birthYear:o,ciltNo:i,dateOfDeath:l,deathStatus:c,haneNo:s,siraNo:u})}}r.parseRecordWithHeaders=w,r.parseRecords=function(e,r){const t=r.map(([e])=>e),n=r.reduce((e,[r,t])=>(e[r]=t,e),{});return e.reduce((e,a)=>{if(a.length<r.length)return e.errors.push([new Error("invalid cell length for row, compared to headers."),a]),e;try{const r=w(t,e=>a[n[e]].trim());e.records.push(r)}catch(r){e.errors.push([r,a])}return e},{records:[],errors:[]})},r.mergeRecordParseResults=function(e,r){return Array.prototype.push.apply(e.records,r.records),Array.prototype.push.apply(e.errors,r.errors),e}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.parseTurkishDate=function(e){const r=e.split("/");return new Date(Date.UTC(parseInt(r[2],10),parseInt(r[1],10)-1,parseInt(r[0],10)))}},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0}),function(e){e.Female="K",e.Male="E"}(r.Gender||(r.Gender={})),function(e){e.Alive="Sağ",e.Dead="Ölüm"}(r.DeathStatus||(r.DeathStatus={}));r.PersonRecord=class{constructor(e,r,t,n,a,o,i,s,u,c,l,d,h,f,p){this.order=e,this.gender=r,this.name=t,this.fathersName=n,this.mothersName=a,this.birthPlace=o,this.birthYear=i,this.birthNeighbourhood=s,this.ciltNo=u,this.haneNo=c,this.siraNo=l,this.marriageStatus=d,this.deathStatus=h,this.lastName=f,this.dateOfDeath=p}};r.AncestorRecord=class{constructor(e,r){this.relation=e,this.record=r}};r.RelationalAncestorRecord=class{constructor(e,r){this.person=e,this.relations=r}}},,,,function(e,r){e.exports=jsdom},function(e,r,t){"use strict";var n=this&&this.__awaiter||function(e,r,t,n){return new(t||(t=Promise))(function(a,o){function i(e){try{u(n.next(e))}catch(e){o(e)}}function s(e){try{u(n.throw(e))}catch(e){o(e)}}function u(e){e.done?a(e.value):new t(function(r){r(e.value)}).then(i,s)}u((n=n.apply(e,r||[])).next())})};let a;Object.defineProperty(r,"__esModule",{value:!0});const o=t(0);function i(){return a||function(){if("undefined"==typeof window){const{JSDOM:e}=t(6);a=(r=>new e(r).window.document)}else a=(e=>{const r=document.createElement("html");return r.innerHTML=e,r})}(),a}function s(e){return new Promise((r,t)=>{const n=i()(e).querySelector(".resultTable");n?r(n):t(new Error("could not found result table in the html"))})}function u(e){return[...new Array(e.length)].map((r,t)=>e.item(t))}function c(e){const r=e.tHead;if(1!==r.rows.length)throw new Error("thead row size does not match one");const t=u(r.rows.item(0).cells).reduce((e,r,t)=>{const n=r.innerHTML.trim(),a=o.findHeaderColumn(n);return a&&e.push([a,t]),e},[]);if(t.length!==Object.keys(o.HeaderColumn).length)throw new Error("not all headers were found in the tables header section");return t}function l(e){const r=e.tBodies;if(1!==r.length)throw new Error("there should be only one tbody");return function(e){return[...new Array(e.length)].map((r,t)=>e.item(t))}(r.item(0).rows).map(e=>u(e.cells).map(e=>e.innerHTML.replace(/<br>/g,"\n")))}function d(e,r){return o.parseRecords(l(e),r)}function h(e){return n(this,void 0,void 0,function*(){const r=yield s(e);return d(r,c(r))})}r.getResultTable=s,r.parseHeaders=c,r.parseTableToStringMatrix=l,r.parseTableRecords=d,r.HTMLParser=h,r.default=h}]);